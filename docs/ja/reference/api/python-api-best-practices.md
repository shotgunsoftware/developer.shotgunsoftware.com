---
layout: default
title: Python API のベスト プラクティス
pagename: python-api-best-practices
lang: ja
---

# Python API のベスト プラクティス


{% include product %} Python API を使用するときのベスト プラクティスのリストを次に示します。

## パフォーマンス

1.  スクリプトにとって不要なフィールドを要求しないでください。余分なフィールドを含めると、要求に不要なオーバーヘッドが追加されることがあります。
2.  可能な限り具体的なフィルタを作成してください。可能な場合は、結果が戻ってきた後に API クエリーを解析するのではなく、API クエリーでフィルタすることをお勧めします。
3.  部分一致フィルタよりも完全一致フィルタの方が適切に機能します。たとえば、「contains」よりも「is」の方が適切に動作します。

## 制御とデバッグ

1.  スクリプトごとに個別のキーを使用し、ツールごとに一意のキーとしてください。これは、デバッグでは重要です。
2.  各スクリプトに所有者または管理者が存在すること、および [管理者] (Admin)メニューにある[スクリプト] (Scripts)ページの情報が最新であることを確認します。
3.  [API ユーザの読み取り専用権限グループ](https://developer.shotgridsoftware.com/ja/bbae2ca7/)を作成することを検討します。多くのスクリプトには読み取りアクセスのみが必要であるため、これらのグループを作成することで、誤って変更されることを防ぐことができます。
4.  使用中のキーをトラックして、古いスクリプトが削除できるようにします。この操作を簡単にするために、一部のスタジオでは、API ラッパーで監査情報をスクリプト化しています。
5.  エンティティ名とフィールドをチェックしてください。{% include product %} にはフィールドごとに 2 つの名前があります。1 つは UI に使用される表示名(一意とは限らない)で、もう 1 つが API で使用される内部フィールド名です。表示名はいつでも変更することができるため、表示名からフィールド名を確実に予測できるわけではありません。フィールド名を確認するには、[管理者] (Admin)メニューのフィールド オプションに移動するか、[https://developer.shotgridsoftware.com/python-api/reference.html?%20read#working-with-the-shotgun-schema](https://developer.shotgridsoftware.com/python-api/reference.html?%20read#working-with-the-shotgun-schema) で説明されている `schema_read(), schema_field_read(), schema_entity_read() methods` を使用します。

## デザイン

1.  特に大きいスタジオでは、API 分離レイヤー(ラッパー)を使用することを検討してください。これにより、{% include product %} API に変更が加えられてもツールに影響はありません。また、API アクセスのコントロール、デバッグの管理、監査のトラックなども実行できます。API 自体の変更は不要です。
2.  最新バージョンの API を使用してください。バグ修正とパフォーマンスの改善が含まれています。
3.  スクリプトが実行される場所に注意してください。スクリプトがレンダリング ファームで実行される場合、1 つの情報を要求するために 1 分間に数千回、{% include product %} を呼び出すため、サイトのパフォーマンスに影響を与えることがあります。このようなケースでは、読み取り専用のキャッシング レイヤを導入し、不必要に繰り返される呼び出しを減らすことを検討してください。
4.  スクリプトのイベント生成をオフにすることができます。これは、後でトラックする必要のないイベントを含む、実行頻度が高いスクリプトで最も役に立ちます。頻繁に実行されるスクリプトの場合、イベント ログが非常に大きくなるため、オフにすることを強くお勧めします。